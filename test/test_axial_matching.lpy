matched = False

def Start():
  print 'Start'
  global matched
  matched = False
  
def EndEach(lstring):
  assert matched == True
  print lstring[0].scale()
  print lstring[2].scale()

module A : scale = 3

Axiom: A(1)[E]B(2)[+(60)C(3)[E][E]D(4)]D(5)

derivation length: 1
ignore: +-

production:

A(a) < B(b) > [C(c)]D(d) :
    global matched
    matched = True
    print 'a =',a,',b =',b,',c =',c,',d =',d
    assert d == 5
    produce B(b)

endlsystem
